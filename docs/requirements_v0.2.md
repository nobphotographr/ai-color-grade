# AIカラグレ要件定義（確定ドラフト v0.2）

## 1. ターゲットカメラ／Logフォーマット

### 初期ターゲット（Phase 1–2）

**Sony S-Log3 / S-Gamut3.Cine**

### 理由（要件として明文化）

- ユーザー数が圧倒的に多い（α7 / FX 系）
- Log特性が比較的素直で、学習が安定
- Resolve 側の IDT / CST が成熟している
- 公開サンプル・検証素材が入手しやすい

### 明示する制約

- Phase 2 までは S-Log3 以外は非対応
- 他Log対応は Phase 4 以降（将来拡張）

> 「最初は1カメラ・1Log」これは妥協ではなく、成功確率を最大化する設計判断。

---

## 2. 基本補正推定モデルの方針（本丸）

### 2-1. このモデルの役割（再定義）

- グレーディングをしない
- 色を作らない
- **やるのは：Log素材を「安全な作業初期状態」に戻すこと**

> Colourlab.ai に近づくのはこの層。

### 2-2. 出力仕様（固定）

モデルの出力は **数値のみ**。

```json
{
  "exposure_ev": +0.6,
  "wb_temp_delta": +300,
  "wb_tint_delta": -4,
  "contrast_factor": 1.08
}
```

※ Resolve 側で CST / Primaries / Offset 等にマッピング。

### 2-3. 学習データ方針（現実解）

#### ❌ やらない

- 映画・CM素材収集
- GAN系生成
- フレーム単位教師データ

#### ✅ 採用方針：ハイブリッド方式

1. **自前撮影データ（少量・高品質）**
   - Sony S-Log3
   - 屋外 / 室内 / 逆光 / 人物
   - 各シーン 5–10カット程度

2. **公開データセット**
   - Sony公式サンプル
   - Log公開素材（YouTube Creator素材等）

3. **疑似教師データ**
   - Resolveで人間が「ここが初期状態として正しい」exposure / WB を決める
   - 数値を教師ラベルにする

> 「正解画像」ではなく「正解パラメータ」を学習させる。これが個人開発の勝ち筋。

### 2-4. モデル構成（指定）

- 既存軽量モデル（ResNet / MobileNet 系）
- ファインチューニング前提
- 入力解像度は低解像度（例：512px）

> モデル自体の新規設計は禁止

---

## 3. 開発フェーズ定義

### Phase 0：Resolve連携の土台

- AIなし
- Resolve Python / Lua
- 数値を受け取ってノード生成
- 手動入力で反映できる状態

🎯 成果：「数値 → ノード反映」が安定動作

### Phase 1：シーン分類＋ルールベース補正

- AI最小構成
- シーン分類（屋外 / 室内 / 人物）
- ルールで露出初期値、コントラスト初期値
- AIは分類のみ

🎯 成果：事故らない自動初期グレード

### Phase 2：基本補正推定モデル導入

- ここが本丸
- 2-2 モデル実装
- 出力は数値のみ
- Phase 1 のルールと併用

🎯 成果：ワンクリックで「だいたい整う」

### Phase 3：ルック選択

- LUT / ノードプリセット選択
- AI or ルールベース

🎯 成果：世界観まで一段寄る

---

## 4. 品質検証・完成判定

### テスト素材セット（固定）

20–30クリップ構成：
- 屋外昼（人物あり / なし）
- 室内混合光
- 逆光
- 夜（街灯）

### 判定基準

7割以上で：
- 白飛び・黒潰れなし
- 肌破綻なし
- 「手直し前提で使える」

※ 完成判定は主観ではなくこのテストセットで行う
